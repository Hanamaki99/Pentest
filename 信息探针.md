# 信息探针

## 网站四大套件信息探针

### 操作系统

> Windows和Linux



- Windows大小写不敏感
- Linux大小写敏感



### 数据库

> Access、Oracle、MySQL、SQLServer、PostgreSQL、DB2、sybase



- 端口服务对应
- 搭建组合推算



### 搭建平台

> IIS、Apache、Nginx、Tomcat等



- 审查元素查看返回信息
- 历史经验



## 网站程序及CDN识别



## 关于绕过CDN技术的研究

### 查询历史DNS记录

> 建站后未使用cdn之前解析的dns记录



- https://dnsdb.io/zh-cn
- https://x.threadbook.cn
- http://toolbar.netcraft.com/site_report?url=
- http://viewdns.info



### 查询子域名

> CDN收费，可能只会对主站或者流量大的子站点做了CND，而很多小站子站点又跟主站在同一台服务器或者同一个C段内，此时就可以通过查询子域名对应的IP来辅助查找网站的真实IP



### 利用网站漏洞

> 让目标站点主动来连接我们，就可以知道真实IP了



常见的可用漏洞：



- XSS盲打
- 命令执行反弹SHELL
- SSRF



### 服务器合法服务主动连接

> 让服务器主动连接，但是使用的是合法的服务



常见的服务



- RSS订阅
- SENDMAIL



查看邮件源码，可获取到服务器的真实IP



### 使用国外主机解析域名

> CDN厂商如果只做了国内的线路，用国外的主机直接访问可能就可以获取到真实IP



### 目标敏感文件泄漏

> 泄漏的敏感文件会告诉我们网站的真实IP，例如phpinfo等



### 从CDN入手

> 社工或者其他手段，获取目标网站管理员在CDN的账号



### 全网扫描











## 分目录站点与分端口站点

> 网站可能有多个CMS或框架组成，那么对于渗透而言，相当于渗透目标是多个（一个CMS一个思路）



### 分目录站点



- www.xxx.com
- www.xxx.com/bbs
- www.xxx.com/old



### 分端口站点



- www.xxx.com
- www.xxx.com:8080
- www.xxx.com:8888



在大多数未很好限制权限的情况下，拿下分目录站点和分端口站点对拿下主站点会有帮助，甚至直接拿下主站



## 分域名和手机站点

> 分域名与主站肯呢个同服务器或网段，对于分域名渗透可以直接和主站进行联系



### 分域名



www.xxx.com

bbs.xxx.com

news.xx.com



字典爆破 subdomainbrute layer

搜索引擎 site 语法



### 手机站点

> 不同主站的一套移动端框架程序
>
> 直接调用主站的程序



- m.baidu.com
- wap.baidu.com



## 目标后台探测

> 后台指的是网站的管理后台，一般用于管理网站的内容和数据



### 尝试常用后台



一般默认和常用后台



- /admin/
- /login/
- /system/
- /manage/

- /guanli/



一般后台目录后面还有文件名，如



- /admin/login.php
- /admin/admin_login.php
- /admin/adminlogin.php



后台路径具体怎样来命名，具体看管理员



### robots.txt

>  Robots是搜索引擎的爬虫指引文件，定义哪些文件可以被搜索引擎收录



存在于根目录/rebots.txt

注：不是所有网站都有robots.txt



*禁止爬虫访问的目录，一般都有自己的原因*



### 工具扫描

> 一般使用字典，字典中有很多目录和文件名，工具会逐个访问字典内的文件名，存在则返回



### 爬行

> 模拟手工点击，按级对目录进行爬行



如果爬出了后台，则一定是在网站上暴露了后台路径



### 通过搜索引擎

> 被搜索引擎爬虫爬出，并且收录



site:xxx.com 管理

site:xxx.com 后台管理

site:xxx.com 管理员

site:xxx.com 系统



### 基于上传问题的后台探测

> 直接查看图片属性路径，很可能就能得到后台路径



/管理目录/图片存放目录/图片

目标的图片存放那个文件夹是位于后台目录下，所以查看那图片路径，后台目录也暴露了





































